<%- include('layout/header')  %> 

<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <div class="container main-container-uf">
                <div class="row">
                    <div class="col-lg-12">
                        <form action="/add" method="post" id="add-form" class="cont-form" enctype="multipart/form-data">

                            <div class="row form-row" >

                              <div class="form-floating col-lg-6">
                                <input type="text" class="form-control" name="name" id="floatingInput" placeholder="name">
                                <label id="float-lables">name</label>
                              </div>

                              <div class="form-floating col-lg-6">
                                <input type="text" class="form-control" name="email" id="floatingInput" placeholder="email">
                                <label id="float-lables">email</label>
                              </div>

                              <div class="form-floating col-lg-6">
                                <input type="text" class="form-control" name="phone" id="floatingInput" placeholder="phone number">
                                <label id="float-lables">phone number</label>
                              </div>

                                <div class="col-lg-6">
                                  <div class="">
                                    <input class="form-control upload-image" type="file" name="image" id="formFile">
                                  </div>
                                </div>
                              </div>

                              <button type="submit" name="submit">Add item</button>
                                              
                          </form>
                    </div>
                </div>
               </div>

        </div>
    </div>
</div>


<div class="container">
    <div class="row my-4">
        <div class="col-lg-12">
            <% if (message) { %>
             <div class="alert alert-dismissible fade show alert-<%= message.type %>"  role="alert">
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
             
                <strong><%= message.message %> </strong> 
             </div>
             </div>
            <% } %>
            <div class="table-resposive">
                <% if (users != '') { %>
                    <table class="table table-stripped text-center">
                        <thead>
                            <tr class="table-dark">
                                <th>ID</th>
                                <th>Image</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% users.forEach((row, index) => { %>
                             <tr class="align-middle">
                                <td><%= index %> </td>
                                <td><img src="<%= row.image %>" width="50" class="img-thumbnail"></td>
                                <td><%= row.name  %> </td>
                                <td><%= row.email %> </td>
                                <td><%= row.phone  %> </td>
                                <td>
                                    <a href="/edit/<%= row._id  %> " class="text-success"><i class="fas fa-edit fa-lg mx-1"></i></a>
                                    <a href="/delete/<%= row._id  %> " class="text-danger"><i class="fas fa-trash fa-lg mx-1"></i></a>
                                </td>
                            </tr>
                            <% }) %>
                        </tbody>
                    </table>
                    
                <% } else { %>
                    <h1 class="text-center text-secondary mt-5"> No users found in the db</h1>
                <% } %> 
            </div>
        </div>
    </div>


<%- include('layout/footer')  %> 